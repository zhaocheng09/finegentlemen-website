<!-- <!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>MapTiler å«æ˜Ÿåœ°å›¾ç¤ºä¾‹ï¼ˆ0GCZRo8V9UPQFhWV1vt6ï¼‰</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.css" rel="stylesheet" />
  <style>
    body, html { margin:0; padding:0; height:100%; }
    #map { width:100%; height:100%; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script src="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.js"></script>
  <script>
    const MAPTILER_KEY = '0GCZRo8V9UPQFhWV1vt6'; // åœ¨è¿™é‡Œå¡«å…¥ä½ å…è´¹æ³¨å†Œçš„ MapTiler Key

    const map = new maplibregl.Map({
      container: 'map',
      style: `https://api.maptiler.com/maps/satellite/style.json?key=${MAPTILER_KEY}`,
      center: [116.391,39.907], // åŒ—äº¬ä¸­å¿ƒ
      zoom: 15 // è¡—é“/å»ºç­‘çº§åˆ«
    });

    map.setMaxBounds([[-179.999, -85], [179.999, 85]]);

    // æ·»åŠ ç¼©æ”¾æ§ä»¶
    map.addControl(new maplibregl.NavigationControl());
    // å¯é€‰ï¼šæ·»åŠ å…¨å±æ§ä»¶
    map.addControl(new maplibregl.FullscreenControl());
  </script>
</body>
</html> -->



<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>METEOR MADNESS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.css" rel="stylesheet" />
  <style>
    body, html { margin:0; padding:0; height:100%; font-family: Arial, sans-serif; }
    #map { width:100%; height:100%; }
    .search-box {
      position: absolute;
      top: 10px;
      left: 10px;
      background: white;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      z-index: 1;
      min-width: 300px;
      max-height: 90vh;
      overflow-y: auto;
    }
    .search-box h3 {
      margin: 0 0 10px 0;
      font-size: 16px;
      color: #333;
    }
    .tab-container {
      display: flex;
      gap: 5px;
      margin-bottom: 15px;
      border-bottom: 2px solid #eee;
    }
    .tab {
      padding: 8px 12px;
      cursor: pointer;
      border: none;
      background: none;
      color: #666;
      font-size: 13px;
      border-bottom: 2px solid transparent;
      margin-bottom: -2px;
      transition: all 0.3s;
    }
    .tab:hover {
      color: #4CAF50;
    }
    .tab.active {
      color: #4CAF50;
      border-bottom-color: #4CAF50;
      font-weight: bold;
    }
    .tab-content {
      display: none;
    }
    .tab-content.active {
      display: block;
    }
    .input-group {
      margin-bottom: 10px;
    }
    .input-group label {
      display: block;
      font-size: 12px;
      color: #666;
      margin-bottom: 3px;
    }
    .input-group input {
      width: 100%;
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
      box-sizing: border-box;
    }
    .input-group input:focus {
      outline: none;
      border-color: #4CAF50;
    }
    button.primary {
      width: 100%;
      padding: 10px;
      background: #4CAF50;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      font-weight: bold;
      margin-top: 5px;
    }
    button.primary:hover {
      background: #45a049;
    }
    button.primary:disabled {
      background: #ccc;
      cursor: not-allowed;
    }
    .examples {
      margin-top: 10px;
      font-size: 11px;
      color: #888;
    }
    .marker {
      background-color: #ff4444;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 3px solid white;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    }
    .info-box {
      background: #f0f8ff;
      padding: 10px;
      border-radius: 4px;
      font-size: 12px;
      color: #333;
      margin-bottom: 10px;
    }
    .coordinates-display {
      background: #f9f9f9;
      padding: 8px;
      border-radius: 4px;
      font-size: 12px;
      margin-top: 10px;
      font-family: monospace;
    }
    .click-mode-toggle {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
      padding: 10px;
      background: #f0f8ff;
      border-radius: 4px;
    }
    .toggle-switch {
      position: relative;
      width: 40px;
      height: 20px;
      background: #ccc;
      border-radius: 20px;
      cursor: pointer;
      transition: background 0.3s;
    }
    .toggle-switch.active {
      background: #4CAF50;
    }
    .toggle-switch::after {
      content: '';
      position: absolute;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: white;
      top: 2px;
      left: 2px;
      transition: left 0.3s;
    }
    .toggle-switch.active::after {
      left: 22px;
    }
  </style>
</head>
<body>
  <div class="search-box">
    <h3>ğŸ—ºï¸ åœ°å›¾å®šä½å·¥å…·</h3>
    
    <div class="tab-container">
      <button class="tab active" onclick="switchTab('coords')">ğŸ“ ç»çº¬åº¦</button>
      <button class="tab" onclick="switchTab('country')">ğŸŒ å›½å®¶æœç´¢</button>
      <button class="tab" onclick="switchTab('click')">ğŸ‘† ç‚¹å‡»é€‰æ‹©</button>
    </div>
    
    <!-- ç»çº¬åº¦æ ‡ç­¾ -->
    <div id="coords-tab" class="tab-content active">
      <div class="input-group">
        <label>çº¬åº¦ (Latitude):</label>
        <input type="number" id="lat" placeholder="ä¾‹å¦‚: 39.907" step="any" value="39.907" />
      </div>
      <div class="input-group">
        <label>ç»åº¦ (Longitude):</label>
        <input type="number" id="lng" placeholder="ä¾‹å¦‚: 116.391" step="any" value="116.391" />
      </div>
      <button class="primary" onclick="goToCoordinates()">ğŸ” å®šä½åˆ°æ­¤åæ ‡</button>
      <div class="examples">
        ç¤ºä¾‹: åŒ—äº¬(39.907, 116.391) | çº½çº¦(40.7128, -74.0060)
      </div>
    </div>
    
    <!-- å›½å®¶æœç´¢æ ‡ç­¾ -->
    <div id="country-tab" class="tab-content">
      <div class="input-group">
        <label>å›½å®¶æˆ–åŸå¸‚åç§°:</label>
        <input type="text" id="country-search" placeholder="ä¾‹å¦‚: China, USA, Paris, Tokyo" />
      </div>
      <button class="primary" onclick="searchCountry()">ğŸ” æœç´¢å®šä½</button>
      <div class="examples">
        å¯æœç´¢å›½å®¶ã€åŸå¸‚æˆ–åœ°æ ‡åç§°
      </div>
    </div>
    
    <!-- ç‚¹å‡»é€‰æ‹©æ ‡ç­¾ -->
    <div id="click-tab" class="tab-content">
      <div class="click-mode-toggle">
        <div class="toggle-switch" id="click-toggle" onclick="toggleClickMode()"></div>
        <span style="font-size: 13px; color: #666;">ç‚¹å‡»åœ°å›¾é€‰æ‹©åæ ‡</span>
      </div>
      <div class="info-box">
        å¯ç”¨åï¼Œç‚¹å‡»åœ°å›¾ä»»æ„ä½ç½®å³å¯åœ¨è¯¥å¤„æ·»åŠ æ ‡è®°å¹¶æ˜¾ç¤ºåæ ‡
      </div>
      <div class="coordinates-display" id="click-coords">
        ç­‰å¾…ç‚¹å‡»åœ°å›¾...
      </div>
    </div>
  </div>
  
  <div id="map"></div>
  
  <script src="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.js"></script>
  <script>
    const MAPTILER_KEY = '0GCZRo8V9UPQFhWV1vt6';
    
    const map = new maplibregl.Map({
      container: 'map',
      style: `https://api.maptiler.com/maps/satellite/style.json?key=${MAPTILER_KEY}`,
      center: [116.391, 39.907],
      zoom: 15
    });
    
    map.setMaxBounds([[-179.999, -85], [179.999, 85]]);
    map.addControl(new maplibregl.NavigationControl());
    map.addControl(new maplibregl.FullscreenControl());
    
    let marker = null;
    let clickModeEnabled = false;
    
    // åˆ‡æ¢æ ‡ç­¾
    function switchTab(tabName) {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
      
      event.target.classList.add('active');
      document.getElementById(tabName + '-tab').classList.add('active');
    }
    
    // æ·»åŠ æˆ–ç§»åŠ¨æ ‡è®°
    function addMarker(lng, lat) {
      if (marker) {
        marker.remove();
      }
      
      const el = document.createElement('div');
      el.className = 'marker';
      
      marker = new maplibregl.Marker(el)
        .setLngLat([lng, lat])
        .addTo(map);
    }
    
    // æ ¹æ®åæ ‡å®šä½
    function goToCoordinates() {
      const lat = parseFloat(document.getElementById('lat').value);
      const lng = parseFloat(document.getElementById('lng').value);
      
      if (isNaN(lat) || isNaN(lng)) {
        alert('è¯·è¾“å…¥æœ‰æ•ˆçš„ç»çº¬åº¦æ•°å€¼ï¼');
        return;
      }
      
      if (lat < -90 || lat > 90) {
        alert('çº¬åº¦å¿…é¡»åœ¨ -90 åˆ° 90 ä¹‹é—´ï¼');
        return;
      }
      
      if (lng < -180 || lng > 180) {
        alert('ç»åº¦å¿…é¡»åœ¨ -180 åˆ° 180 ä¹‹é—´ï¼');
        return;
      }
      
      addMarker(lng, lat);
      
      map.flyTo({
        center: [lng, lat],
        zoom: 12,
        essential: true,
        duration: 2000
      });
    }
    
    // æœç´¢å›½å®¶æˆ–åŸå¸‚
    async function searchCountry() {
      const query = document.getElementById('country-search').value.trim();
      
      if (!query) {
        alert('è¯·è¾“å…¥å›½å®¶æˆ–åŸå¸‚åç§°ï¼');
        return;
      }
      
      try {
        const response = await fetch(
          `https://api.maptiler.com/geocoding/${encodeURIComponent(query)}.json?key=${MAPTILER_KEY}`
        );
        const data = await response.json();
        
        if (data.features && data.features.length > 0) {
          const [lng, lat] = data.features[0].center;
          
          addMarker(lng, lat);
          
          map.flyTo({
            center: [lng, lat],
            zoom: data.features[0].place_type[0] === 'country' ? 5 : 10,
            essential: true,
            duration: 2000
          });
          
          // æ›´æ–°ç»çº¬åº¦è¾“å…¥æ¡†
          document.getElementById('lat').value = lat.toFixed(6);
          document.getElementById('lng').value = lng.toFixed(6);
        } else {
          alert('æœªæ‰¾åˆ°è¯¥åœ°ç‚¹ï¼Œè¯·å°è¯•å…¶ä»–åç§°ï¼');
        }
      } catch (error) {
        alert('æœç´¢å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼');
        console.error(error);
      }
    }
    
    // åˆ‡æ¢ç‚¹å‡»æ¨¡å¼
    function toggleClickMode() {
      clickModeEnabled = !clickModeEnabled;
      const toggle = document.getElementById('click-toggle');
      
      if (clickModeEnabled) {
        toggle.classList.add('active');
        map.getCanvas().style.cursor = 'crosshair';
      } else {
        toggle.classList.remove('active');
        map.getCanvas().style.cursor = '';
      }
    }
    
    // åœ°å›¾ç‚¹å‡»äº‹ä»¶
    map.on('click', function(e) {
      if (clickModeEnabled) {
        const { lng, lat } = e.lngLat;
        
        addMarker(lng, lat);
        
        // æ›´æ–°æ˜¾ç¤º
        document.getElementById('click-coords').innerHTML = `
          <strong>å·²é€‰æ‹©åæ ‡:</strong><br>
          çº¬åº¦: ${lat.toFixed(6)}<br>
          ç»åº¦: ${lng.toFixed(6)}
        `;
        
        // æ›´æ–°ç»çº¬åº¦è¾“å…¥æ¡†
        document.getElementById('lat').value = lat.toFixed(6);
        document.getElementById('lng').value = lng.toFixed(6);
      }
    });
    
    // æ”¯æŒå›è½¦é”®æäº¤
    document.getElementById('lat').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') goToCoordinates();
    });
    document.getElementById('lng').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') goToCoordinates();
    });
    document.getElementById('country-search').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') searchCountry();
    });
    
    // åˆå§‹åŠ è½½æ—¶æ·»åŠ åŒ—äº¬æ ‡è®°
    map.on('load', function() {
      goToCoordinates();
    });
  </script>
</body>
</html>